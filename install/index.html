
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the official Authentication and Authorization framework for CodeIgniter 4">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../concepts/">
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.13">
    
    
      
        <title>Installation - CodeIgniter Shield</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Raleway";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/github.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://codeigniter.com" title="CodeIgniter Shield" class="md-header__button md-logo" aria-label="CodeIgniter Shield" data-md-component="logo">
      
  <img src="../assets/flame.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CodeIgniter Shield
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/codeigniter4/shield" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://codeigniter.com" title="CodeIgniter Shield" class="md-nav__button md-logo" aria-label="CodeIgniter Shield" data-md-component="logo">
      
  <img src="../assets/flame.svg" alt="logo">

    </a>
    CodeIgniter Shield
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/codeigniter4/shield" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Installation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composer-installation" class="md-nav__link">
    Composer Installation
  </a>
  
    <nav class="md-nav" aria-label="Composer Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#important-composer-error" class="md-nav__link">
    IMPORTANT: composer error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    Initial Setup
  </a>
  
    <nav class="md-nav" aria-label="Initial Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-setup" class="md-nav__link">
    Command Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-setup" class="md-nav__link">
    Manual Setup
  </a>
  
    <nav class="md-nav" aria-label="Manual Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-migration-error" class="md-nav__link">
    Note: migration error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controller-filters" class="md-nav__link">
    Controller Filters
  </a>
  
    <nav class="md-nav" aria-label="Controller Filters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protect-all-pages" class="md-nav__link">
    Protect All Pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limiting" class="md-nav__link">
    Rate Limiting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-password-reset" class="md-nav__link">
    Forcing Password Reset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../authorization/" class="md-nav__link">
        Authorization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../auth_actions/" class="md-nav__link">
        Auth Actions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        Events
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../customization/" class="md-nav__link">
        Customization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../forcing_password_reset/" class="md-nav__link">
        Forcing Password Reset
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../banning_users/" class="md-nav__link">
        Banning Users
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../session_auth_event_and_logging/" class="md-nav__link">
        Session Authenticator Event and Logging
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
      
      
      
        <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/api_tokens/" class="md-nav__link">
        Protecting an API with Access Tokens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/mobile_apps/" class="md-nav__link">
        Mobile Authentication with Access Tokens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/strengthen_password/" class="md-nav__link">
        How to Strengthen the Password
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
      
      
      
        <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
          Addons
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Addons
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../addons/jwt/" class="md-nav__link">
        JWT Authentication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composer-installation" class="md-nav__link">
    Composer Installation
  </a>
  
    <nav class="md-nav" aria-label="Composer Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#important-composer-error" class="md-nav__link">
    IMPORTANT: composer error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    Initial Setup
  </a>
  
    <nav class="md-nav" aria-label="Initial Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-setup" class="md-nav__link">
    Command Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-setup" class="md-nav__link">
    Manual Setup
  </a>
  
    <nav class="md-nav" aria-label="Manual Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-migration-error" class="md-nav__link">
    Note: migration error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controller-filters" class="md-nav__link">
    Controller Filters
  </a>
  
    <nav class="md-nav" aria-label="Controller Filters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protect-all-pages" class="md-nav__link">
    Protect All Pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limiting" class="md-nav__link">
    Rate Limiting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-password-reset" class="md-nav__link">
    Forcing Password Reset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installation">Installation</h1>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#composer-installation">Composer Installation</a><ul>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#important-composer-error">IMPORTANT: composer error</a></li>
</ul>
</li>
<li><a href="#initial-setup">Initial Setup</a><ul>
<li><a href="#command-setup">Command Setup</a></li>
<li><a href="#manual-setup">Manual Setup</a></li>
</ul>
</li>
<li><a href="#controller-filters">Controller Filters</a><ul>
<li><a href="#protect-all-pages">Protect All Pages</a></li>
<li><a href="#rate-limiting">Rate Limiting</a></li>
<li><a href="#forcing-password-reset">Forcing Password Reset</a></li>
</ul>
</li>
</ul>
<p>These instructions assume that you have already <a href="https://codeigniter.com/user_guide/installation/installing_composer.html">installed the CodeIgniter 4 app starter</a> as the basis for your new project, set up your <strong>.env</strong> file, and created a database that you can access via the Spark CLI script.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li><a href="https://getcomposer.org">Composer</a></li>
<li>Codeigniter <strong>v4.2.7</strong> or later</li>
<li>A created database that you can access via the Spark CLI script</li>
</ul>
<h2 id="composer-installation">Composer Installation</h2>
<p>Installation is done through <a href="https://getcomposer.org">Composer</a>. The example assumes you have it installed globally.
If you have it installed as a phar, or otherwise you will need to adjust the way you call composer itself.</p>
<pre class="highlight"><code class="language-console">composer require codeigniter4/shield</code></pre>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="important-composer-error">IMPORTANT: composer error</h4>
<p>If you get the following error:</p>
<pre class="highlight"><code class="language-console">Could not find a version of package codeigniter4/shield matching your minimum-stability (stable).
Require it with an explicit version constraint allowing its desired stability.</code></pre>
<ol>
<li>
<p>Run the following commands to change your <a href="https://getcomposer.org/doc/articles/versions.md#minimum-stability">minimum-stability</a> in your project <code>composer.json</code>:</p>
<pre class="highlight"><code class="language-console">composer config minimum-stability dev
composer config prefer-stable true</code></pre>
</li>
<li>
<p>Or specify an explicit version:</p>
<pre class="highlight"><code class="language-console">composer require codeigniter4/shield:dev-develop</code></pre>
<p>The above specifies <code>develop</code> branch.
See <a href="https://getcomposer.org/doc/articles/versions.md#branches">https://getcomposer.org/doc/articles/versions.md#branches</a></p>
<pre class="highlight"><code class="language-console">composer require codeigniter4/shield:^1.0.0-beta</code></pre>
<p>The above specifies <code>v1.0.0-beta</code> or later and before <code>v2.0.0</code>.
See <a href="https://getcomposer.org/doc/articles/versions.md#caret-version-range-">https://getcomposer.org/doc/articles/versions.md#caret-version-range-</a></p>
</li>
</ol>
<h2 id="initial-setup">Initial Setup</h2>
<h3 id="command-setup">Command Setup</h3>
<ol>
<li>
<p>Run the following command. This command handles steps 1-5 of <em>Manual Setup</em> and runs the migrations.</p>
<pre class="highlight"><code class="language-console">php spark shield:setup</code></pre>
<blockquote>
<p><strong>Note</strong> If you want to customize table names, you must change the table names
before running database migrations.
See <a href="../customization/#custom-table-names">Customizing Shield</a>.</p>
</blockquote>
</li>
<li>
<p>Configure <strong>app/Config/Email.php</strong> to allow Shield to send emails with the <a href="https://codeigniter.com/user_guide/libraries/email.html">Email Class</a>.</p>
<pre class="highlight"><code class="language-php">&lt;?php

namespace Config;

use CodeIgniter\Config\BaseConfig;

class Email extends BaseConfig
{
    /**
     * @var string
     */
    public $fromEmail = 'your_mail@example.com';

    /**
     * @var string
     */
    public $fromName = 'your name';

    // ...
}</code></pre>
</li>
</ol>
<h3 id="manual-setup">Manual Setup</h3>
<p>There are a few setup items to do before you can start using Shield in
your project.</p>
<ol>
<li>
<p>Copy the <strong>Auth.php</strong> and  <strong>AuthGroups.php</strong> from <strong>vendor/codeigniter4/shield/src/Config/</strong> into your project's config folder and update the namespace to <code>Config</code>. You will also need to have these classes extend the original classes. See the example below. These files contain all the settings, group, and permission information for your application and will need to be modified to meet the needs of your site.</p>
<pre class="highlight"><code class="language-php">// new file - app/Config/Auth.php
&lt;?php

declare(strict_types=1);

namespace Config;

// ...
use CodeIgniter\Shield\Config\Auth as ShieldAuth;

class Auth extends ShieldAuth
{
    // ...
}</code></pre>
</li>
<li>
<p><strong>Helper Setup</strong> The <code>setting</code> helper needs to be included in almost every page. The simplest way to do this is to add it to the <code>BaseController::initController()</code> method:</p>
<pre class="highlight"><code class="language-php">public function initController(RequestInterface $request, ResponseInterface $response, LoggerInterface $logger)
{
    $this-&gt;helpers = array_merge($this-&gt;helpers, ['setting']);

    // Do Not Edit This Line
    parent::initController($request, $response, $logger);
}</code></pre>
<p>This requires that all of your controllers extend the <code>BaseController</code>, but that's a good practice anyway.</p>
</li>
<li>
<p><strong>Routes Setup</strong> The default auth routes can be setup with a single call in <strong>app/Config/Routes.php</strong>:</p>
<pre class="highlight"><code class="language-php">service('auth')-&gt;routes($routes);</code></pre>
</li>
<li>
<p><strong>Security Setup</strong> Set <code>Config\Security::$csrfProtection</code> to <code>'session'</code> (or set <code>security.csrfProtection = session</code> in your <strong>.env</strong> file) for security reasons, if you use Session Authenticator.</p>
</li>
<li>
<p><strong>Migration</strong> Run the migrations.</p>
<blockquote>
<p><strong>Note</strong> If you want to customize table names, you must change the table names
before running database migrations.
See <a href="../customization/#custom-table-names">Customizing Shield</a>.</p>
</blockquote>
<pre class="highlight"><code class="language-console">php spark migrate --all</code></pre>
<h4 id="note-migration-error">Note: migration error</h4>
<p>When you run <code>spark migrate --all</code>, if you get <code>Class "SQLite3" not found</code> error:</p>
<ol>
<li>Remove sample migration files in <strong>tests/_support/Database/Migrations/</strong></li>
<li>Or install <code>sqlite3</code> php extension</li>
</ol>
<p>If you get <code>Specified key was too long</code> error:</p>
<ol>
<li>Use InnoDB, not MyISAM.</li>
</ol>
</li>
<li>
<p>Configure <strong>app/Config/Email.php</strong> to allow Shield to send emails.</p>
<pre class="highlight"><code class="language-php">&lt;?php

namespace Config;

use CodeIgniter\Config\BaseConfig;

class Email extends BaseConfig
{
    /**
     * @var string
     */
    public $fromEmail = 'your_mail@example.com';

    /**
     * @var string
     */
    public $fromName = 'your name';

    // ...
}</code></pre>
</li>
</ol>
<h2 id="controller-filters">Controller Filters</h2>
<p>The <a href="https://codeigniter.com/user_guide/incoming/filters.html">Controller Filters</a> you can use to protect your routes the shield provides are:</p>
<pre class="highlight"><code class="language-php">public $aliases = [
    // ...
    'session'     =&gt; \CodeIgniter\Shield\Filters\SessionAuth::class,
    'tokens'      =&gt; \CodeIgniter\Shield\Filters\TokenAuth::class,
    'chain'       =&gt; \CodeIgniter\Shield\Filters\ChainAuth::class,
    'auth-rates'  =&gt; \CodeIgniter\Shield\Filters\AuthRates::class,
    'group'       =&gt; \CodeIgniter\Shield\Filters\GroupFilter::class,
    'permission'  =&gt; \CodeIgniter\Shield\Filters\PermissionFilter::class,
    'force-reset' =&gt; \CodeIgniter\Shield\Filters\ForcePasswordResetFilter::class,
    'jwt'         =&gt; \CodeIgniter\Shield\Filters\JWTAuth::class,
];</code></pre>
<table>
<thead>
<tr>
<th>Filters</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>session and tokens</td>
<td>The <code>Session</code> and <code>AccessTokens</code> authenticators, respectively.</td>
</tr>
<tr>
<td>chained</td>
<td>The filter will check both authenticators in sequence to see if the user is logged in through either of authenticators, allowing a single API endpoint to work for both an SPA using session auth, and a mobile app using access tokens.</td>
</tr>
<tr>
<td>jwt</td>
<td>The <code>JWT</code> authenticator. See <a href="../addons/jwt/">JWT Authentication</a>.</td>
</tr>
<tr>
<td>auth-rates</td>
<td>Provides a good basis for rate limiting of auth-related routes.</td>
</tr>
<tr>
<td>group</td>
<td>Checks if the user is in one of the groups passed in.</td>
</tr>
<tr>
<td>permission</td>
<td>Checks if the user has the passed permissions.</td>
</tr>
<tr>
<td>force-reset</td>
<td>Checks if the user requires a password reset.</td>
</tr>
</tbody>
</table>
<p>These can be used in any of the <a href="https://codeigniter.com/user_guide/incoming/filters.html#globals">normal filter config settings</a>, or <a href="https://codeigniter.com/user_guide/incoming/routing.html#applying-filters">within the routes file</a>.</p>
<blockquote>
<p><strong>Note</strong> These filters are already loaded for you by the registrar class located at <strong>src/Config/Registrar.php</strong>.</p>
</blockquote>
<h3 id="protect-all-pages">Protect All Pages</h3>
<p>If you want to limit all routes (e.g. <code>localhost:8080/admin</code>, <code>localhost:8080/panel</code> and ...), you need to add the following code in the <strong>app/Config/Filters.php</strong> file.</p>
<pre class="highlight"><code class="language-php">public $globals = [
    'before' =&gt; [
        // ...
        'session' =&gt; ['except' =&gt; ['login*', 'register', 'auth/a/*']],
    ],
    // ...
];</code></pre>
<h3 id="rate-limiting">Rate Limiting</h3>
<p>To help protect your authentication forms from being spammed by bots, it is recommended that you use
the <code>auth-rates</code> filter on all of your authentication routes. This can be done with the following
filter setup:</p>
<pre class="highlight"><code class="language-php">public $filters = [
    'auth-rates' =&gt; [
        'before' =&gt; [
            'login*', 'register', 'auth/*'
        ]
    ]
];</code></pre>
<h3 id="forcing-password-reset">Forcing Password Reset</h3>
<p>If your application requires a force password reset functionality, ensure that you exclude the auth pages and the actual password reset page from the <code>before</code> global. This will ensure that your users do not run into a <em>too many redirects</em> error. See:</p>
<p><pre class="highlight"><code class="language-php">public $globals = [
    'before' =&gt; [
        //...
        //...
        'force-reset' =&gt; ['except' =&gt; ['login*', 'register', 'auth/a/*', 'change-password', 'logout']]
    ]
];</code></pre>
In the example above, it is assumed that the page you have created for users to change their password after successful login is <strong>change-password</strong>.</p>
<blockquote>
<p><strong>Note</strong> If you have grouped or changed the default format of the routes, ensure that your code matches the new format(s) in the <strong>app/Config/Filter.php</strong> file.</p>
</blockquote>
<p>For example, if you configured your routes like so:</p>
<p><pre class="highlight"><code class="language-php">$routes-&gt;group('accounts', static function($routes) {
    service('auth')-&gt;routes($routes);
});</code></pre>
Then the global <code>before</code> filter for <code>session</code> should look like so:</p>
<p><pre class="highlight"><code class="language-php">public $globals = [
    'before' =&gt; [
        // ...
        'session' =&gt; ['except' =&gt; ['accounts/login*', 'accounts/register', 'accounts/auth/a/*']]
    ]
]</code></pre>
The same should apply for the Rate Limiting and Forcing Password Reset.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/codeigniter4/shield" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b4d07000.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/highlight.min.js"></script>
      
        <script src="../assets/hljs.js"></script>
      
    
  </body>
</html>